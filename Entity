package com.example.movieassistant.service;

import com.example.movieassistant.entity.Schedules;
import com.example.movieassistant.exception.ScheduleNotFoundException;
import com.example.movieassistant.repository.ScheduleItemRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class ScheduleService {

    @Autowired
    private ScheduleItemRepository scheduleRepository;

    public List<Schedules> getAllSchedules() {
        return scheduleRepository.findAll();
    }

    public Schedules getScheduleById(Long id) {
        return scheduleRepository.findById(id)
            .orElseThrow(() -> new ScheduleNotFoundException("Schedule with ID " + id + " not found"));
    }

    public Schedules addSchedule(Schedules schedule) {
        return scheduleRepository.save(schedule);
    }

    public Schedules updateSchedule(Long id, Schedules updatedSchedule) {
        Schedules existingSchedule = scheduleRepository.findById(id)
            .orElseThrow(() -> new ScheduleNotFoundException("Schedule with ID " + id + " not found"));

        // Update the fields as needed
        existingSchedule.setSceneNumber(updatedSchedule.getSceneNumber());
        existingSchedule.setDate(updatedSchedule.getDate());
        existingSchedule.setTime(updatedSchedule.getTime());
        existingSchedule.setLocation(updatedSchedule.getLocation());
        existingSchedule.setCast(updatedSchedule.getCast());
        existingSchedule.setCrew(updatedSchedule.getCrew());
        existingSchedule.setNotes(updatedSchedule.getNotes());

        return scheduleRepository.save(existingSchedule);
    }

    public void deleteSchedule(Long id) {
        Schedules existingSchedule = scheduleRepository.findById(id)
            .orElseThrow(() -> new ScheduleNotFoundException("Schedule with ID " + id + " not found"));

        scheduleRepository.delete(existingSchedule);
    }
}




package com.example.movieassistant.exception;

public class ScheduleNotFoundException extends RuntimeException {

    public ScheduleNotFoundException(String message) {
        super(message);
    }
}

